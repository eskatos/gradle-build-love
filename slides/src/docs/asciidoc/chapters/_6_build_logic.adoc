[background-color="#02303a"]
== Logique de build
image::gradle/bg-11.png[background, size=cover]

&#x1F9F0;


=== Phases d'un build
image::gradle/bg-11.png[background, size=cover]

* Configuration
* Calcul du graphe de tâches
* Execution du travail


[background-color="#02303a"]
=== Démo
image::gradle/bg-11.png[background, size=cover]

[.notes]
--
Observation d'un simple build
CLI/IDE
Build Scan
--


=== Blocs de construction
image::gradle/bg-11.png[background, size=cover]

* Plugins
* Extensions de DSL
* Tâches

include::../fragments/_diagram_how-it-works.adoc[]


== Modèle de programmation
image::gradle/bg-11.png[background, size=cover]

* Don't call us, we'll call you - _Sugarloaf^WHollywood_
* `(abstract class|interface) MyType extends GradleApiType` +
  instancié et décoré par Gradle
* Services Gradle injectés `@Inject`

include::../fragments/_diagram_build-logic-parts.adoc[]


== Beans ?

* Oui et non
* TODO words from polygene
* JavaBeans + `Property<T>`
* La convention JavaBeans apporte de l'interop avec Groovy et Kotlin
* `Property<T>` associe une propriété à ses dépendances dans le build

[.notes]
--
TRANSITION: tout ça c'est du code, et le code ça se teste
--


=== Tester c'est douter
image::gradle/bg-11.png[background, size=cover]

image::tester-cest-douter.jpeg[width=40%]

* TestKit
* Approche générale
* TODO


[background-color="#02303a"]
=== Démo
image::gradle/bg-11.png[background, size=cover]

[.notes]
--
Montrer les tests du plugin de démo
--


=== TestKit
image::gradle/bg-11.png[background, size=cover]

* Comment tester des scénarios et lesquels sont importants
* Tester plusieurs versions de Gradle
* TODO


=== Plugins
image::gradle/bg-11.png[background, size=cover]

* Cibles de plugin : `Project`, `Settings` ou `Gradle`
* Equivalence en scripts : _project script_, _settings script_, _init script_
*

=== Plugins & extensions
image::gradle/bg-11.png[background, size=cover]


=== Plugins & tâches
image::gradle/bg-11.png[background, size=cover]

* Build incrémental - inputs/outputs
* Build cache - cache des outputs
* Tâches incrémentales - e.g. compilation


=== Configuration différée
image::gradle/bg-11.png[background, size=cover]

* `Property`/`Provider`
* Conteneurs
* Extensions => Tasks
* afterEvaluate
* Ordre
*
* TODO


=== Build services
image::gradle/bg-11.png[background, size=cover]

_ Services de build partagés ou _shared build services_
* TODO


=== Injection de services
image::gradle/bg-11.png[background, size=cover]

* TODO
